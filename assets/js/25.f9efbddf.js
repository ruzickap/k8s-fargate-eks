(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{313:function(a,t,s){"use strict";s.r(t);var e=s(8),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"workload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#workload"}},[a._v("#")]),a._v(" Workload")]),a._v(" "),t("p",[a._v("Run some workload on the K8s...")]),a._v(" "),t("h2",{attrs:{id:"podinfo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#podinfo"}},[a._v("#")]),a._v(" podinfo")]),a._v(" "),t("p",[a._v("Install "),t("code",[a._v("podinfo")]),a._v(" "),t("a",{attrs:{href:"https://github.com/stefanprodan/podinfo/releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("helm chart"),t("OutboundLink")],1),a._v("\nand modify the\n"),t("a",{attrs:{href:"https://github.com/stefanprodan/podinfo/blob/master/charts/podinfo/values.yaml",target:"_blank",rel:"noopener noreferrer"}},[a._v("default values"),t("OutboundLink")],1),a._v(".")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("helm repo "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" sp https://stefanprodan.github.io/podinfo\nhelm "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5.1")]),a._v(".1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--values")]),a._v(" - podinfo sp/podinfo "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("EOF\ningress:\n  enabled: true\n  path: /\n  hosts:\n    - podinfo."),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CLUSTER_FQDN}")]),a._v("\n  # tls:\n  #   - secretName: ingress-cert-"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LETSENCRYPT_ENVIRONMENT}")]),a._v("\n  #     hosts:\n  #       - podinfo."),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CLUSTER_FQDN}")]),a._v("\nEOF")]),a._v("\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('"sp" has been added to your repositories\nNAME: podinfo\nLAST DEPLOYED: Sat Jan  2 11:15:35 2021\nNAMESPACE: default\nSTATUS: deployed\nREVISION: 1\nNOTES:\n1. Get the application URL by running these commands:\n  http://podinfo.k2.k8s.mylabs.dev/\n')])])]),t("h2",{attrs:{id:"kuard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kuard"}},[a._v("#")]),a._v(" kuard")]),a._v(" "),t("p",[a._v("Install "),t("a",{attrs:{href:"https://github.com/kubernetes-up-and-running/kuard",target:"_blank",rel:"noopener noreferrer"}},[a._v("kuard"),t("OutboundLink")],1),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl run kuard "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--image")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("gcr.io/kuar-demo/kuard-amd64:blue "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--expose")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--labels")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"app=kuard"')]),a._v("\n\nkubectl apply "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" - "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("EOF\napiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  name: kuard\n  labels:\n    app: kuard\nspec:\n  rules:\n    - host: kuard."),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CLUSTER_FQDN}")]),a._v("\n      http:\n        paths:\n          - backend:\n              serviceName: kuard\n              servicePort: 8080\n            path: /\n  # tls:\n  #   - hosts:\n  #       - kuard."),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CLUSTER_FQDN}")]),a._v("\n  #     secretName: ingress-cert-"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LETSENCRYPT_ENVIRONMENT}")]),a._v("\nEOF")]),a._v("\n")])])]),t("h2",{attrs:{id:"octant"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#octant"}},[a._v("#")]),a._v(" Octant")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("helm repo "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" octant-dashboard https://aleveille.github.io/octant-dashboard-turnkey/repo\nhelm "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.16")]),a._v(".2 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--values")]),a._v(" - octant octant-dashboard/octant "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("EOF\nplugins:\n  install:\n    - https://github.com/bloodorangeio/octant-helm/releases/download/v0.1.0/octant-helm_0.1.0_linux_amd64.tar.gz\ningress:\n  enabled: true\n  hosts:\n    - host: octant."),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CLUSTER_FQDN}")]),a._v('\n      paths: ["/"]\n  # tls:\n  #   - secretName: ingress-cert-'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LETSENCRYPT_ENVIRONMENT}")]),a._v("\n  #     hosts:\n  #       - octant."),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CLUSTER_FQDN}")]),a._v("\nEOF")]),a._v("\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('"octant-dashboard" has been added to your repositories\nNAME: octant\nLAST DEPLOYED: Sat Jan  2 11:15:41 2021\nNAMESPACE: default\nSTATUS: deployed\nREVISION: 1\nNOTES:\n1. Get the application URL by running these commands:\n  http://octant.k2.k8s.mylabs.dev/\n')])])]),t("p",[a._v("Set retention for all log groups which belongs to the cluster to 1 day:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[a._v("LOG_GROUP")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("aws logs describe-log-groups "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" jq "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(' ".logGroups'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" select"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(".logGroupName"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v('"/$'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("CLUSTER_NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("/$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("CLUSTER_FQDN"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v('"'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" .logGroupName"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"); do\n  aws logs put-retention-policy --log-group-name "')]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${LOG_GROUP}")]),a._v('" --retention-in-days '),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);